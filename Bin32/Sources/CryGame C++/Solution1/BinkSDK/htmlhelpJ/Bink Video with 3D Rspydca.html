<!-- This page was created with the RAD auto-doc generator. -->
<!doctype html public "-//w3c//dtd html 3.2 final//en">
<html>
<head>
<title>Bink ビデオの 3D レンダリング</title>
<meta http-equiv="content-type" content="text/html; charset=shift_jis">
<meta name="ms.locale" content="en-us">
<meta name="description" content="">
<meta name="ms-hkwd" content="Bink Video with 3D Rendering">
<link rel="stylesheet" title="default" href="reference.css" type="text/css" media="screen">
</head>
<body topmargin="0">
<table cellspacing=0 cellpadding=0 class=bar width=100% height=25>
<tr class=bar>
<td class=bar>
<i>&nbsp;<a href="index.html" class=trn>Bink SDK 1.9c</a></i>
</td>
</tr>
</table>
<h1>Bink ビデオの 3D レンダリング</h1>
<h4>説明</h4>
<p>Bink は、とても簡単に 3D レンダリング パイプラインに統合できるように設計されています。プラットフォームに応じて、Bink は 3D ゲームで使用できるさまざまな種類の描画方法を用意しています。これらには、それぞれ異なる利点と欠点があります。この方法について説明します。</p><p>1) <a href="BinkCopyToBuffer.html">BinkCopyToBuffer</a> を使用すると、<b>バック バッファに直接ブラストした後で</b>、フリップしたりスワップすることができます。これが最も汎用的で最も高速なビデオ再生の方法です。しかし、この方法ではハードウェアでビデオを拡大することができません。ムービーやゲームの解像度によっては、これが問題になることがあります。</p><p><b>利点: </b> 高速で、汎用的です。<b>欠点: </b> ビデオを拡大できず、色変換はソフトウェアが処理します。</p><p>2) <b>プライマリ 3D サーフェス上にブリット</b>してみることができます (BinkBuffers などを使用)。この方法では、Present または SwapBuffer の後で、画面にブリットするために 2D のブリッティング関数を呼び出すだけです。この方法で問題になる点は、これを適切にサポートしていない PC や Mac のビデオ カードが多いことです。ご使用のマシンでは問題なく動作するかもしれませんが、古いビデオ カードでは失敗することもあります。常に動作する (コンソールや埋め込みシステムのように) ことを確認していないかぎり、この方法はお勧めできません。</p><p><b>利点: </b> なし。もっとよい方法があります。<b>欠点: </b> 失敗します。この方法は使用しないでください (他の方法を使用してください。3D システムが動作しているときは BinkBuffer API を使用しないでください)。</p><p>3) <b>固定機能 3D パイプラインを使用して、RGB テクスチャでフレームをレンダリング</b>できます。3D ハードウェアはビデオを画面全体に拡大できるので、これは優れた方法です。この方法をほとんどのプラットフォームで使用できるようにするため、テクスチャと頂点を扱う高レベルのサンプル コードを用意しています。この方法の唯一の欠点は、「テクスチャのスウィズル」です。</p><p>テクスチャのスウィズルとは、GPU からより効率よくアクセスできるように、ビデオ テクスチャ メモリが再配置されることです。ほとんどすべての 3D ハードウェアは、デフォルトでテクセルをスウィズルします。スウィズルの問題点は、通常、ホスト CPU で (そして低速で) 実行されることです。たとえば、Pentium III と geForce II グラフィック カードを使用して 640x480 のビデオを再生すると、CPU 時間の 90% がスウィズリングに使用されます。これでは、Bink にはあまり CPU 時間が与えられません。</p><p>ありがたいことに、3D システムで (通常は Bink を使用して) ビデオを再生するゲーム会社が増えたため、ビデオ カードは「動的テクスチャ」または「リニア テクスチャ」と呼ばれるトリガーを 3D API 内部で出すようになりました。このトリガーは、スウィズルしたフォーマットを使用するのではなくリニアにテクスチャにアクセスする (その結果ラスタライズが多少遅くなってしまう場合でも) ように 3D カードに指示します。同じ P3/geForce II の設定で、D3D に動的テクスチャを使用すると CPU 使用率は 90% から 1% 以下に低下します。</p><p>ただし、現在でも、動的/リニア テクスチャをサポートしていないハードウェアがあります (サポートしている場合でも、リニア フラグをサポートしていない古いドライバがインストールされている場合があります)。このため、3D テクスチャを使用する場合は、常に代替策が必要です。</p><p>ほとんどの人は、代替策としてバック バッファ方式 (推奨) を使用しますが、低速のマシン用にビデオを小さくして配布する人もいます。小さいビデオは、ビデオ カードでより高速にスウィズルできます (320x240 のビデオは 640x480 のビデオよりも 4 倍高速でスウィズル可能)。</p><p>コンソールは、ほとんどがリニア テクスチャをサポートしているため、スウィズルはあまり問題になりません。</p><p><b>利点: </b> ハードウェアで拡大でき、互換性が高く、通常はページ フリップを使用して再生がスムーズです。<b>欠点: </b> PC や Mac ではかなり遅くなる可能性があります。代替策があることを確認してください。標準の 3D ハードウェアの信頼性に問題があります。</p><p>4) <b>3D ハードウェアのピクセル シェーダ/レジスタ コンバイナといくつかの輝度 (8 ビット) テクスチャ</b>を使用して、レンダリング時に直接 YUV データを RGB ピクセルに変換できます。この変換を実行できる 3D ハードウェア (Windows、プレイステーション 3、ゲームキューブ、Wii、Xbox 360、および Xbox) では、これが最善の方法です。この方法は拡大可能で、メモリの使用が最小限、さらにきわめて高速で高品質です。</p><p>Windows、PS3、Wii、ゲームキューブ、Xbox、および Xbox 360 では、この方法が最適なので、このピクセル シェーダ ブリッティングを実行するためのクロス プラットフォーム API が用意されています。詳細については、<b>BinkTextures.h</b> ファイルを参照してください。</p><p><b>利点: </b> 高速で高品質です。コンソールのメモリはほとんど使用しません。通常はページ フリップを使用して再生がスムーズです。<b>欠点: </b> ビデオ カードにピクセル シェーダ/レジスタ コンバイナが必要です (もちろん、ゲームでピクセル シェーダを使用している場合は問題になりません)。</p><p>6) <b>3D ハードウェアのマルチパス レンダリングといくつかの輝度 (8 ビット) テクスチャ</b>を使用して、レンダリング時に直接 YUV データを RGB ピクセルに変換できます。この変換をサポートする 3D ハードウェア (ソニー PSP およびソニー PS2) では、これが最善の方法です。この方法は拡大可能で、メモリの使用が最小限、さらにきわめて高速で高品質です。</p><p>Sony PSP および PS2 では、この方法が最適なので、この 3D パレットブリッティングを実行するためのクロス プラットフォーム API が用意されています。詳細については、<b>BinkPaletteTextures.h</b> ファイルを参照してください。</p><p><b>利点: </b> 高速で高品質です。コンソールのメモリはほとんど使用しません。通常はページ フリップを使用して再生がスムーズです。<b>欠点: </b> 設定が多少複雑です (ただし、設定を行うための API が用意されています)。</p><p>7) <b>オーバーレイ サーフェス</b>を使用できます。オーバーレイは 3D (および 2D) サーフェスの上にフロートするため、3D レンダリングに影響しません。唯一の問題は汎用性です。ほとんどの Window 用ビデオ カードでは、オーバーレイは広範に使用するだけの信頼性がありません (特に 3D システムがアクティブな場合)。Xbox (オーバーレイ システムが安定して広範に使用できる) では、これが最も簡単な方法です (ピクセル シェーダも高品質ですが)。</p><p><b>利点: </b> きわめて高速 (ハードウェアの処理による色変換と拡大) であり、3D システムとも干渉せず、品質も優れています。<b>欠点: </b> Xbox または埋め込みシステムでのみ信頼性があります。</p><p>では、どの方法を使用すればよいのでしょうか。それは、プラットフォームによって異なります。次のように対応することをお勧めします。</p><p><b>PC (Windows、MacOS、および GNU/Linux):</b> ゲームでピクセル シェーダを使用する場合は、ピクセル シェーダ方式を使用します。それ以外の場合は、デフォルトのバック バッファ方式を使用します。ビデオより高い解像度でゲームを実行できる場合は、ユーザーが 3D テクスチャ方式を選択して画面全体にビデオを拡大できるようにします。データ取り込みの速度が十分でないマシンが多いので、デフォルトのバック バッファ方式を指定してください。これに従わずに後悔した開発者がいらっしゃいました。</p><p><b>Microsoft Xbox 360:</b> ピクセル シェーダ方式を使用します。きわめて高速で高品質です。他の方法よりメモリ使用量が少なくなります。</p><p><b>Microsoft Xbox:</b> 品質、速度、およびメモリ ヒットを最適化するには、ピクセル シェーダ方式を使用します。きわめて高速で高品質です。他の方法よりメモリ使用量が少なくなります。簡略化のためにオーバーレイ方式も使用できます。ピクセル パイプラインの複雑な処理は回避されますが、メモリ使用量は増加し、速度は遅くなります。</p><p><b>ソニー プレイステーション 3:</b> ピクセル シェーダ方式を使用します。きわめて高速で高品質です。他の方法よりメモリ使用量が少なくなります。</p><p><b>ソニー PSP:</b> 3D ハードウェア マルチパス方式を使用します。きわめて高速で高品質です。他の方法よりメモリ使用量が少なくなります。</p><p><b>ソニー プレイステーション 2:</b> 3D ハードウェア マルチパス方式を使用します。きわめて高速で高品質です。他の方法よりメモリ使用量が少なくなります。</p><p><b>ニンテンドー Wii:</b> バック バッファ方式を使用します。Wii のバック バッファは YUV (Bink の標準フォーマット) なので、色変換せずにそのままバイト列をコピーするだけです。3D テクスチャ方式を使用する場合は、マルチパス方式を使用して、ソフトウェア色変換を回避してください。</p><p><b>ニンテンドー ゲームキューブ</b>: バック バッファ方式を使用します。ゲームキューブのバック バッファは YUV (Bink の標準フォーマット) なので、色変換せずにそのままバイト列をコピーするだけです。3D テクスチャ方式を使用する場合は、マルチパス方式を使用して、ソフトウェア色変換を回避してください。</p><p><br> <b>重要事項</b> 3D システムで<i>非</i>アルファ平面ビデオを再生する場合は、アルファ ブレンディングのレンダリング状態をオフにする必要があります。Bink は、非アルファ ピクセル フォーマット (<a href="BINK_COPY_FLAGS.html#BINKSURFACE32">BINKSURFACE32</a> など) でアルファ値を設定しません。設定すると、ブリッティング速度が遅くなるためです。非アルファ ビデオを再生しようとして、画面が黒くなる場合は、アルファのレンダリング状態がオンになっている可能性があります。</p>
<p><a href="Audio%20Tracks%20in%20Bink.html">次のトピック (Bink のオーディオ トラック)</a>  </p><p><a href="Colorspace%20-%20RGB%20vs.%20YUV.html">前のトピック (色空間 - RGB と YUV)</a>  </p><p>
<br>
<b>グループ:</b> <a href="Bink%20Overview.html">Bink の概要</a><br>
<b>関連項目:</b> <a href="Direct3D.html">Direct3D</a>, <a href="OpenGL.html">OpenGL</a><br>
<b>関連する関数:</b> <a href="BinkCopyToBuffer.html">BinkCopyToBuffer</a><br>
<b>関連する基本データ型:</b> <a href="BINK_COPY_FLAGS.html">BINK_COPY_FLAGS</a></p>
<p align=center>
<a href="mailto:Bink3@radgametools.com">テクニカル サポート: Bink3@radgametools.com</a>
<br>
<a href="http://www.radgametools.com/bnkmain.htm?from=help1.8o">&#169; Copyright 1994-2006 RAD Game Tools, Inc. All Rights Reserved.</a>
</p>
<br>
</body>
</html>
